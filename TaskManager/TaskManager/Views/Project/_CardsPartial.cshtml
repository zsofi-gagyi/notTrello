@using TodoWithDatabase.Models.DAOs;
@using TodoWithDatabase.Models.DAOs.JoinTables;

@{ foreach (Card card in (List<Card>)ViewData["cards"])
   {
       <ul class="displayCard" data-test="@ViewData["cardType"]">
           <li class="stats">
               <p class="@((card.Deadline < DateTime.Now && @ViewData["cardType"].Equals("toDoCard")) ? "pastDeadline" : "deadline")">
                   deadline: @card.Deadline
               </p>
               <a class="toggleDone" href="@card.Project.Id/cards/@card.Id/toggleDone">@ViewData["toggleName"]</a>
           </li>
           <li class="title titleToBeCentered" data-test="title">@card.Title</li>
           <li class="description" data-test="description">@card.Description</li>
           @if (((Project)ViewData["project"]).AssigneeProjects.Count() > 1)
            {
                <li class="responsibles">
                @foreach (AssigneeCard assigneeCard in card.AssigneeCards.OrderBy(ac => ac.Assignee.UserName).ToList())
                 {
                       <span class="responsibleName" data-test="responsibleName">@assigneeCard.Assignee.UserName</span>
                 }
                </li>
            }
       </ul>
   }
}